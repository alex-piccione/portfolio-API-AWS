# syntax ref.: https://www.serverless.com/framework/docs/providers/aws/guide/serverless.yml/
service: PortfolioAPIFSharp
configValidationMode: error

provider:
  name: aws
  runtime: dotnetcore3.1
  stackName: Portfolio-FSharp # CloudFormation stack name
  apiName: Portfolio-FSharp # API Gateway name  
  deploymentBucket:
    name: portfolio.api.fsharp-functions
  memorySize: 512
  lambdaHashingVersion: "20201221"

  apiGateWay:
    restApiId: portfolio-fsharp

  environment:
    handler_prefix: "Portfolio.API::Portfolio.Lambda.Functions" # Assembly::Namespace prefix, contatenate .Class::Method

package:
  individually: true

functions:
  currency_list:
    handler: ${self:provider.environment.handler_prefix}.Currency_List::Handle   # assembly::namespace.class::method
    package: &package
      artifact: "FSharp project/publish/fsharp-functions.zip"
    events:
    - http:
        method: GET
        path: currency
        cors: true
